<?php  ob_start(); require_once '../App/partials/Header.inc'; require_once '../App/partials/Menu/MarketingMenu.inc'; require '../Assets/Carbon/autoload.php'; ?>
<?php 

if(isset($_POST) && !empty($_POST))
{
  
    if(isset($_POST['From']) && !empty($_POST['From']) && isset($_POST['To']) && !empty($_POST['To']))
    { 
        //$CustId=$_POST['CustId1'];
        $From=$_POST['From'];
        $To=$_POST['To'];  

        $SQL=$Controller->QueryData("SELECT `CTNId`,ppcustomer.CustName,  `CTNQTY`, `CTNUnit`, SUM(`ReceivedAmount`) AS RA, SUM(`FinalTotal`) AS Final, ProductName, CtnCurrency, CTNColor, JobType, 
            GrdPrice, employeet.Ename, SUM(cartonproduction.ProQty) As QTY, `CTNPrice` FROM `carton` INNER JOIN ppcustomer ON ppcustomer.CustId=carton.CustId1 
            inner join employeet on employeet.EId=carton.EmpId INNER JOIN cartonproduction ON cartonproduction.CtnId1=carton.CTNId  where JobNo!='NULL'
            AND CTNOrderDate BETWEEN ? AND ?   group by ppcustomer.CustName, `CTNUnit`, CtnCurrency",[$From,$To ]);

        $Currency=$Controller->QueryData("SELECT `CtnCurrency`,SUM(cartonproduction.ProQty), SUM(`FinalTotal`) FROM `carton` INNER JOIN cartonproduction 
            ON cartonproduction.CtnId1=carton.CTNId INNER JOIN ppcustomer ON ppcustomer.CustId=carton.CustId1 where JobNo!='NULL'
            and CTNOrderDate  BETWEEN ? AND ? group by CtnCurrency",[$From,$To]);
    }
}
?>


<div class="card m-3">
    <div class="card-body">
        <h4 class="font-bold">
            <svg width="50" height="50" viewBox="0 0 551 578" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_2_100)">
                        <path d="M451.999 362C507.577 362 546 366.195 546 377.898C546 398.298 522.421 432 451.999 432C373.084 432 358 398.723 358 377.898C358 366.195 396.411 362 451.999 362Z" fill="#FEBE69"/>
                        <path d="M98.9519 367.059C43.3017 367.059 4.8316 370.953 4.8316 381.818C4.8316 400.757 28.4412 432.045 98.9519 432.045C177.969 432.045 193.074 401.151 193.074 381.818C193.074 370.953 154.606 367.059 98.9519 367.059Z" fill="#FEBE69"/>
                        <path d="M275.56 467.179C200.877 467.179 153.873 473.666 149.256 488.91L142.83 529.357C142.919 531.802 143.902 534.116 145.575 535.82C157.633 549.516 208.31 558.506 275.558 558.506C342.805 558.506 393.484 549.516 405.54 535.82C407.214 534.116 408.197 531.802 408.285 529.357L401.86 488.91C397.247 473.666 350.242 467.179 275.56 467.179Z" fill="#A98A75"/>
                        <path d="M275.56 462.176C246.009 462.176 216.159 462.682 186.869 467.179C177.937 468.302 169.152 470.46 160.674 473.615C155.093 475.878 148.872 478.988 145.823 484.724C144.973 486.431 144.434 488.289 144.233 490.203L142.474 501.274L138.541 526.024C138.438 526.676 138.324 527.331 138.231 527.985C138.04 529.915 138.245 531.865 138.83 533.705C139.416 535.545 140.37 537.232 141.628 538.654C143.894 541.319 146.613 543.52 149.645 545.144C157.704 549.433 166.29 552.533 175.159 554.355C203.528 561.133 233.14 562.837 262.144 563.372C294.387 563.967 326.937 562.899 358.854 557.724C369.537 556.19 380.068 553.655 390.32 550.152C397.245 547.65 405.165 544.379 409.853 538.147C411.147 536.447 412.061 534.464 412.527 532.345C412.993 530.225 413 528.023 412.546 525.9L410.821 515.042L406.846 490.069C404.743 476.83 389.312 472.538 378.644 469.956C367.744 467.483 356.697 465.786 345.579 464.876C330.8 463.454 315.966 462.791 301.121 462.451C292.598 462.253 284.073 462.16 275.546 462.169C269.408 462.169 269.398 472.177 275.546 472.177C303.673 472.177 332.561 472.527 360.243 476.609C369.035 477.701 377.703 479.701 386.121 482.581C386.888 482.862 387.649 483.164 388.406 483.475C388.571 483.542 389.599 483.994 388.99 483.721C388.382 483.448 389.623 484.025 389.829 484.138C391.098 484.749 392.327 485.445 393.51 486.223C394.015 486.559 394.504 486.928 394.987 487.288C395.227 487.463 394.192 486.519 394.836 487.182C395.068 487.426 395.337 487.636 395.577 487.874C395.937 488.235 396.243 488.708 396.621 489.031C397.141 489.488 396.14 488.124 396.422 488.75C396.539 489.01 396.75 489.248 396.893 489.498C396.996 489.684 397.08 489.894 397.195 490.069C397.692 490.828 397.082 489.709 397.086 489.748C397.115 489.969 397.243 490.186 397.284 490.413C397.414 491.187 397.531 491.963 397.654 492.738L399.318 503.219L403.199 527.646C403.34 528.54 403.452 529.449 403.626 530.337C403.811 531.28 403.527 529.503 403.543 529.503C403.99 529.657 401.997 532.458 401.804 532.662C401.383 533.106 400.918 533.496 400.484 533.927C399.81 534.599 400.768 533.729 400.526 533.911C400.192 534.165 399.862 534.421 399.52 534.665C398.237 535.573 396.901 536.396 395.519 537.128C394.778 537.528 394.027 537.903 393.27 538.266C392.901 538.441 392.532 538.612 392.161 538.779C391.662 539.006 392.28 538.727 392.343 538.698C392.015 538.837 391.684 538.976 391.35 539.115C389.432 539.911 387.482 540.626 385.516 541.287C380.881 542.842 376.155 544.091 371.405 545.171C344.142 551.374 315.838 552.906 288.021 553.379C257.428 553.901 226.452 553.058 196.149 548.29C185.636 546.801 175.258 544.407 165.12 541.131C163.242 540.491 161.387 539.791 159.555 539.031C159.293 538.923 159.03 538.81 158.76 538.696C158.825 538.725 159.444 539.004 158.943 538.777C158.573 538.61 158.204 538.439 157.836 538.264C156.965 537.847 156.103 537.413 155.252 536.948C153.939 536.238 152.668 535.444 151.448 534.569C151.152 534.361 150.866 534.13 150.573 533.909C150.333 533.727 151.291 534.597 150.615 533.925C150.15 533.464 149.647 533.052 149.206 532.56C149.019 532.351 147.121 529.655 147.556 529.501C147.63 529.476 147.288 531.315 147.483 530.275C147.654 529.351 147.777 528.417 147.924 527.489L149.673 516.489L153.467 492.601C153.584 491.856 153.724 491.112 153.823 490.366C153.851 490.157 154.002 489.949 154.01 489.74C154.01 489.763 153.414 490.81 153.902 490.061C154.036 489.853 154.143 489.613 154.26 489.396C154.377 489.179 154.57 488.979 154.674 488.741C154.956 488.116 153.954 489.479 154.475 489.023C154.882 488.664 155.216 488.164 155.608 487.772C155.818 487.563 156.055 487.38 156.26 487.167C156.898 486.504 155.862 487.449 156.109 487.274C156.639 486.884 157.16 486.488 157.709 486.127C158.902 485.351 160.141 484.655 161.417 484.042C161.616 483.944 162.683 483.45 162.105 483.711C161.527 483.971 162.524 483.533 162.689 483.465C163.508 483.129 164.331 482.806 165.16 482.501C168.924 481.162 172.761 480.061 176.651 479.205C200.756 473.705 226.12 472.982 250.861 472.427C259.089 472.244 267.319 472.157 275.55 472.166C281.699 472.181 281.709 462.174 275.56 462.176Z" fill="#211715"/>
                        <path d="M183.932 512.159C206.657 517.851 230.598 519.039 253.864 519.688C281.818 520.708 309.806 519.787 337.643 516.929C348.297 515.92 358.864 514.079 369.257 511.421C375.191 509.795 372.675 500.14 366.721 501.77C346.305 507.366 324.665 508.531 303.679 509.378C275.379 510.708 247.027 510.116 218.8 507.608C207.921 506.719 197.115 505.014 186.468 502.506C180.505 501.011 177.953 510.658 183.932 512.155V512.159Z" fill="#211715"/>
                        <path d="M270.79 145.72V480.694C270.79 487.134 280.33 487.144 280.33 480.694V145.72C280.33 139.279 270.79 139.269 270.79 145.72Z" fill="#211715"/>
                        <path d="M463.86 88.6727H87.2614C81.122 88.6727 81.1121 98.6802 87.2614 98.6802H449.713C454.226 98.6802 458.76 98.8074 463.274 98.6802C463.472 98.6802 463.671 98.6802 463.87 98.6802C470.007 98.6802 470.019 88.6727 463.87 88.6727H463.86Z" fill="#211715"/>
                        <path d="M443.212 107.837C451.731 140.751 460.248 173.664 468.763 206.576C477.822 241.551 486.91 276.517 496.027 311.475C500.091 327.03 504.183 342.578 508.301 358.118C510.108 364.931 519.59 362.03 517.769 355.173C509.756 324.967 501.84 294.726 494.02 264.45C484.738 228.754 475.482 193.04 466.251 157.308C461.731 139.837 457.211 122.365 452.69 104.892C450.922 98.0626 441.438 100.968 443.222 107.837H443.212Z" fill="#211715"/>
                        <path d="M428.664 102.946C413.721 168.087 400.383 233.593 388.648 299.465C385.357 317.965 382.193 336.488 379.158 355.035C378.826 356.442 379.022 357.929 379.707 359.189C380.392 360.45 381.514 361.388 382.84 361.812C384.189 362.188 385.624 361.995 386.838 361.276C388.051 360.556 388.946 359.366 389.327 357.964C400.146 291.94 412.575 226.235 426.616 160.848C430.562 142.491 434.635 124.163 438.833 105.864C440.416 98.9768 430.246 96.0314 428.664 102.935V102.946Z" fill="#211715"/>
                        <path d="M452.05 360.714C473.448 360.308 494.848 361.403 516.145 363.993C522.496 364.742 528.778 366.202 534.912 368.353C536.021 368.771 537.101 369.25 538.187 369.768C538.854 370.088 537.141 369.14 538.1 369.732C538.285 369.847 538.48 369.939 538.663 370.059C539.176 370.387 539.691 370.699 540.187 371.071C540.521 371.315 540.833 371.609 541.16 371.868C540.226 371.134 541.09 371.379 541.187 371.968C541.209 372.1 542.662 374.006 541.269 371.943C541.465 372.255 541.627 372.596 541.752 372.958C541.052 371.061 541.494 372.264 541.599 372.828C541.225 370.814 541.53 372.007 541.486 372.725C541.448 373.38 541.116 376.636 541.436 374.436C541.149 376.593 540.723 378.717 540.161 380.79C540.035 381.23 539.894 381.665 539.763 382.103C539.305 383.645 540.149 381.213 539.564 382.694C539.11 383.826 538.675 384.957 538.171 386.055C537.638 387.215 537.063 388.347 536.454 389.447C536.168 389.965 535.871 390.471 535.573 390.977C535.404 391.265 535.229 391.546 535.054 391.827C535.533 391.057 535.253 391.514 534.926 391.998C533.353 394.313 531.658 396.499 529.853 398.543C528.038 400.65 526.071 402.551 523.976 404.223C518.585 408.665 512.772 412.282 506.667 414.993C488.66 423.087 469.255 425.287 450.201 425.147C431.822 425.015 412.998 423.217 395.49 415.89C385.383 411.662 376.54 405.684 369.614 395.784C369.439 395.539 369.278 395.273 369.107 395.021C368.663 394.361 369.799 396.187 369.177 395.134C368.904 394.672 368.626 394.217 368.359 393.748C367.761 392.695 367.199 391.613 366.672 390.5C366.242 389.589 365.839 388.66 365.462 387.712C365.263 387.201 365.064 386.68 364.879 386.164C364.754 385.835 364.553 385.138 365.039 386.653C364.939 386.345 364.84 386.04 364.738 385.729C364.134 383.753 363.636 381.729 363.25 379.671C363.091 378.791 362.981 377.904 362.852 377.022C362.609 375.477 362.93 378.383 362.832 376.853C362.8 376.335 362.747 375.819 362.715 375.301C362.661 374.431 362.663 373.561 362.619 372.691C362.587 372.046 362.862 370.699 362.51 372.835C362.675 371.831 362.721 371.992 362.357 372.965C362.471 372.596 362.634 372.253 362.84 371.951C361.593 373.383 362.623 372.33 362.922 371.975C363.437 371.362 363.519 371.391 362.848 371.975C363.28 371.606 363.704 371.242 364.157 370.917C364.533 370.646 364.919 370.396 365.309 370.157C365.729 369.913 366.805 369.341 365.765 369.864C366.958 369.267 368.152 368.757 369.386 368.3C372.217 367.271 375.094 366.441 378.002 365.812C396.061 361.716 415.502 361.288 434.154 360.904C440.122 360.782 446.091 360.724 452.059 360.731C458.205 360.731 458.215 349 452.059 349C429.817 349 407.335 349.21 385.238 352.685C378.317 353.491 371.486 355.201 364.859 357.786C360.387 359.741 355.196 362.693 353.557 368.664C352.427 372.777 353.253 378.082 353.955 382.205C354.806 387.098 356.272 391.798 358.3 396.136C363.586 407.549 372.412 415.99 381.906 421.662C397.863 431.194 415.845 434.696 433.396 436.167C455.436 438.014 478.269 437.13 499.698 430.023C513.483 425.453 527.213 417.974 537.63 405.701C544.532 397.57 549.937 386.983 550.926 375.116C552.082 361.212 539.447 357.175 530.633 354.968C511.261 350.124 491.028 349.648 471.334 349.205C464.913 349.064 458.494 348.996 452.075 349.002C445.906 348.98 445.896 360.711 452.05 360.714Z" fill="#211715"/>
                        <path d="M519.005 385.262C502.861 389.294 485.901 390.078 469.377 390.553C448.799 391.305 428.197 390.659 407.699 388.621C400.159 387.915 392.681 386.61 385.329 384.716C379.385 383.091 376.847 392.74 382.793 394.364C398.538 398.668 415.257 399.652 431.444 400.325C452.808 401.355 474.214 400.912 495.523 398.999C504.276 398.281 512.971 396.916 521.541 394.913C527.504 393.422 524.983 383.769 519.005 385.262Z" fill="#211715"/>
                        <path d="M99.2688 104.664C90.6385 135.904 82.0083 167.144 73.3781 198.386C64.2 231.599 54.9882 264.803 45.743 297.997C41.595 312.865 37.4244 327.724 33.2312 342.575C31.4066 349.016 40.9244 351.768 42.7429 345.346C50.8622 316.68 58.8828 287.978 66.8048 259.24C76.2117 225.34 85.5953 191.432 94.9557 157.515C99.5612 140.822 104.169 124.129 108.778 107.435C110.562 100.983 101.046 98.2268 99.2688 104.664Z" fill="#211715"/>
                        <path d="M109.17 105.666C124.038 167.494 137.315 229.673 149 292.204C152.283 309.805 155.44 327.43 158.471 345.079C158.861 346.442 159.772 347.597 161.009 348.296C162.245 348.996 163.708 349.183 165.082 348.817C166.438 348.412 167.584 347.501 168.283 346.275C168.982 345.049 169.179 343.601 168.834 342.233C158.066 279.567 145.696 217.203 131.723 155.14C127.786 137.671 123.722 120.231 119.532 102.82C117.92 96.1294 107.558 98.9596 109.17 105.666Z" fill="#211715"/>
                        <path d="M99.0287 337.006C76.7912 337.006 54.315 337.245 32.2227 341.198C25.3032 342.115 18.4734 344.06 11.8489 347.001C7.37755 349.225 2.18814 352.583 0.549164 359.375C-0.662163 364.379 0.35026 370.734 1.4681 375.63C2.92336 381.862 5.14012 387.694 8.02001 392.867C16.1035 407.632 27.7712 417.332 40.0217 423.982C59.0827 434.324 80.1208 437.121 100.417 436.996C120.138 436.874 140.653 434.683 159.37 425.375C178.431 415.898 196.506 396.718 197.924 366.453C198.173 363.47 197.807 360.45 196.869 357.748C195.931 355.047 194.46 352.776 192.629 351.204C187.996 347.404 182.882 344.885 177.568 343.787C158.199 338.277 137.972 337.734 118.281 337.231C111.864 337.07 105.447 336.993 99.0287 337C92.8845 337 92.8746 350.345 99.0287 350.345C120.42 349.885 141.812 351.133 163.102 354.082C169.451 354.934 175.731 356.594 181.864 359.041C182.972 359.517 184.052 360.062 185.138 360.651C185.805 361.015 184.092 359.936 185.051 360.609C185.236 360.74 185.431 360.846 185.614 360.982C186.127 361.354 186.642 361.71 187.137 362.133C187.47 362.411 187.782 362.744 188.11 363.039C187.177 362.205 188.038 362.483 188.138 363.153C188.16 363.303 189.612 365.472 188.219 363.125C188.415 363.479 188.578 363.867 188.703 364.279C188.003 362.122 188.444 363.49 188.55 364.132C188.176 361.852 188.468 363.164 188.438 363.968C188.4 365.01 188.394 366.053 188.337 367.095C188.305 367.632 188.255 368.166 188.225 368.702C188.132 370.37 188.424 367.29 188.225 368.73C188.064 369.903 187.937 371.079 187.746 372.244C187.371 374.471 186.892 376.661 186.312 378.8C186.218 379.153 186.113 379.5 186.012 379.851C186.037 379.762 186.505 378.31 186.173 379.295C185.974 379.881 185.791 380.473 185.588 381.054C185.17 382.253 184.718 383.429 184.231 384.58C183.774 385.658 183.29 386.714 182.779 387.746C182.487 388.338 182.183 388.919 181.874 389.498C181.389 390.421 181.974 389.317 182.043 389.195C181.809 389.603 181.574 390.009 181.335 390.412C179.906 392.786 178.352 395.006 176.685 397.054C176.227 397.61 175.763 398.161 175.293 398.708C175.094 398.931 174.905 399.145 174.712 399.364C173.757 400.437 175.245 398.808 174.624 399.456C173.504 400.613 172.371 401.73 171.199 402.792C168.797 404.935 166.3 406.862 163.722 408.561C157.453 412.508 150.909 415.538 144.194 417.602C135.341 420.354 126.345 422.115 117.292 422.867C96.7254 424.78 75.554 424.077 55.4965 416.887C48.3782 414.463 41.4793 410.918 34.9318 406.323C29.9175 402.853 25.2648 398.445 21.1019 393.22C19.2611 390.843 17.5411 388.289 15.9543 385.578C15.8071 385.327 15.3994 384.58 16.0498 385.769C15.9105 385.514 15.7693 385.258 15.6341 384.997C15.3019 384.354 14.9697 383.718 14.6515 383.05C14.0408 381.799 13.4581 380.512 12.9349 379.192C12.4297 377.943 11.9882 376.659 11.5426 375.369C10.9916 373.784 11.7415 376.264 11.3914 374.885C11.2124 374.199 11.0175 373.523 10.8504 372.831C10.5852 371.746 10.3551 370.647 10.1602 369.533C10.0548 368.939 9.96132 368.344 9.87778 367.743C9.83203 367.412 9.60329 365.199 9.71865 366.525C9.83402 367.852 9.69081 366.042 9.67489 365.691C9.65301 365.135 9.64904 364.579 9.61522 364.023C9.56948 363.284 9.85988 361.691 9.50384 364.14C9.66893 362.997 9.71468 363.181 9.34869 364.287C9.46348 363.868 9.6275 363.478 9.83402 363.134C8.58689 364.763 9.61721 363.565 9.91557 363.161C10.4307 362.464 10.5123 362.497 9.84197 363.161C10.2716 362.742 10.6973 362.327 11.1508 361.958C11.5267 361.649 11.9126 361.366 12.3024 361.093C12.6923 360.821 13.7982 360.164 12.7579 360.759C13.9414 360.081 15.1448 359.5 16.376 358.98C19.2071 357.811 22.0832 356.866 24.9905 356.15C43.0471 351.491 62.484 351.004 81.1313 350.567C87.0984 350.428 93.0655 350.363 99.0327 350.37C105.173 350.348 105.183 337.003 99.0287 337.006Z" fill="#211715"/>
                        <path d="M29.5781 394.913C46.3904 399.11 64.0772 400.037 81.289 400.542C102.253 401.338 123.244 400.672 144.124 398.547C152.279 397.786 160.369 396.387 168.326 394.36C174.262 392.738 171.746 383.083 165.79 384.711C150.707 388.833 134.743 389.701 119.238 390.33C98.2698 391.316 77.2625 390.891 56.3458 389.058C48.192 388.403 40.0939 387.133 32.1141 385.258C26.1516 383.767 23.5976 393.416 29.5781 394.909V394.913Z" fill="#211715"/>
                        <path d="M292.229 73.1319C286.485 56.8239 283.778 47.4877 277.742 21.2347C277.625 20.7248 277.348 20.271 276.955 19.9463C276.563 19.6217 276.077 19.4452 275.577 19.4452C275.078 19.4452 274.592 19.6217 274.2 19.9463C273.807 20.271 273.53 20.7248 273.413 21.2347C266.854 50.1876 261.727 69.0601 251.103 92.4735C249.359 96.134 247.278 99.6066 244.888 102.842C244.563 103.293 244.406 103.854 244.446 104.418C244.487 104.982 244.723 105.512 245.109 105.906C256.949 118.098 266.587 132.437 273.558 148.23C273.735 148.63 274.018 148.969 274.372 149.207C274.727 149.444 275.139 149.571 275.56 149.571C275.98 149.571 276.392 149.444 276.747 149.207C277.102 148.969 277.384 148.63 277.561 148.23C284.533 132.437 294.172 118.098 306.012 105.906C306.398 105.511 306.634 104.982 306.674 104.417C306.714 103.853 306.557 103.293 306.231 102.842C303.842 99.6066 301.76 96.134 300.016 92.4735C296.981 85.7956 294.455 79.4512 292.229 73.1319Z" fill="white"/>
                        <path d="M296.828 71.8038C291.236 55.4645 286.552 38.7991 282.798 21.8914C282.659 20.5611 282.237 19.2805 281.563 18.1445C280.888 17.0084 279.979 16.0459 278.903 15.3282C277.715 14.6716 276.375 14.3835 275.037 14.4976C273.699 14.6117 272.42 15.1233 271.35 15.9724C269.074 17.78 268.681 20.5112 268.055 23.2487C267.36 26.2746 266.654 29.2963 265.936 32.3138C263.539 42.3213 260.938 52.2996 257.787 62.0882C254.757 71.6108 251.15 80.9207 246.989 89.9612C245.8 92.4883 244.432 94.919 242.899 97.2333C241.082 100.008 239.039 102.446 239.896 106.086C240.54 108.819 242.972 110.706 244.747 112.649C246.621 114.705 248.435 116.816 250.191 118.983C257.026 127.469 262.867 136.784 267.588 146.729C268.748 149.16 269.575 151.974 271.887 153.496C273.171 154.316 274.672 154.682 276.17 154.541C277.667 154.4 279.082 153.759 280.206 152.712C281.815 150.696 283.075 148.399 283.927 145.926C285.22 143.259 286.593 140.636 288.045 138.058C291.015 132.743 294.324 127.646 297.951 122.8C299.897 120.217 301.928 117.708 304.045 115.274C306.221 113.146 308.256 110.864 310.134 108.444C312.299 105.108 311.363 101.831 309.278 98.7949C307.408 96.1313 305.752 93.3098 304.327 90.3594C301.525 84.3097 299.022 78.1128 296.828 71.7934C296.463 70.5332 295.651 69.468 294.559 68.8174C293.468 68.1669 292.18 67.9806 290.961 68.297C289.746 68.6593 288.716 69.5079 288.093 70.6597C287.47 71.8116 287.303 73.1743 287.63 74.4537C291.096 84.2402 294.741 94.4792 300.507 103.059C300.808 103.613 301.166 104.132 301.572 104.608L302.113 105.369L302.029 103C301.173 103.793 300.372 104.65 299.632 105.562C297.855 107.508 296.133 109.506 294.465 111.554C291.42 115.286 288.54 119.181 285.841 123.197C283.046 127.356 280.462 131.666 278.1 136.11C276.989 138.195 275.929 140.315 274.92 142.469C274.39 143.362 273.956 144.312 273.626 145.305C273.228 147.217 277.921 147.221 277.499 145.305C277.262 144.596 276.954 143.916 276.579 143.276C272.451 134.391 267.474 125.97 261.723 118.141C258.704 113.996 255.486 110.015 252.081 106.213C251.356 105.286 250.558 104.423 249.696 103.634L249.394 103.317C248.665 102.397 248.536 103.081 249.007 105.369C249.399 104.884 249.759 104.372 250.084 103.836C251.598 101.667 252.98 99.3999 254.222 97.0478C258.259 88.8794 261.735 80.4189 264.622 71.7309C267.52 63.5164 269.989 55.1455 272.205 46.6996C273.417 42.069 274.558 37.4176 275.659 32.7579C276.237 30.3172 276.804 27.8737 277.36 25.4274C277.54 24.8036 277.684 24.1694 277.794 23.5281C278.078 20.9178 278.688 25.2544 275.574 24.4454L274.357 23.501C273.165 22.1513 272.833 22.1701 273.363 23.5573C273.45 24.3895 273.638 25.2066 273.924 25.9882C277.6 42.4054 282.173 58.5872 287.62 74.4537C287.985 75.7138 288.797 76.7789 289.889 77.4291C290.98 78.0793 292.268 78.2651 293.487 77.948C294.701 77.5884 295.731 76.7427 296.356 75.5933C296.981 74.444 297.151 73.083 296.828 71.8038Z" fill="#211715"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_2_100">
                        <rect width="551" height="578" fill="white"/>
                        </clipPath>
                        </defs>
            </svg>  
            Customer balance 
        </h4>
    </div>
</div>


<form action="" method="POST">
    <div class="card m-3 shadow">
        <div class="card-body">
            <div class="row"> 
                <form action="" method="POST">
                    <!-- <input type="hidden" name="CustId1" id = "CustId1" value = "<?php if(isset( $CustId )) echo $CustId;  ?>"   >
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12"  style="z-index: 11;">
                                <input type="text" name = "CustomerName" id = "customer" class="form-control "  onclick= "HideLiveSearch()" onkeyup="AJAXSearch(this.value)" 
                                value = "<?php if(isset($_REQUEST['CustomerName'])) echo $_REQUEST['CustomerName'];  ?>"  >
                                <div  id="livesearch" class="list-group shadow z-index-2  position-absolute mt-2  w-25 "  > </div>
                    </div> -->
        
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <input type="date" name="From" id="From" class="form-control">
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                        <input type="date" name="To" id="To" class="form-control" onchange="this.form.submit()">
                    </div>
                </form>
                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                    <input type="text" class="form-control border-3 " id = "Search_input"  placeholder="Search Anything " onkeyup="search( this.id , 'JobTable' )"> 
                </div>
            </div>
        </div>                
    </div>
</form>


<div class="card m-3">
    <div class="card-body">
        <table class="table table-responsive   table-striped table-hover" id="JobTable" >
			<thead class="table-info">
				<tr style="background-color:#148d8d ;">
                    <th>No</th>
                    <th>Company</th>
                    <th>Product Type</th>
                    <th>Produced Qty</th>
                    <th>Total Amount</th>
                    <th>Received Amount</th>
                    <th>Remaining Amount</th>
                    <th>Currency</th>
				</tr>
			</thead>
            <tbody>
                <?php
                if(isset($_POST['From']) && !empty($_POST['From']))
                {

                    $Counter=1;
                    while($Rows=$SQL->fetch_assoc())
                    {
                        $RemainAmount=$Rows['Final']-$Rows['RA'];
                        ?>
                        <tr>
                            <td><?=$Counter?></td>
                            <td><?=$Rows['CustName']?></td>
                            <td><?=$Rows['CTNUnit']?></td>
                            <td><?=$Rows['QTY']?></td>
                            <td><?=$Rows['Final']?></td>
                            <td><?=$Rows['RA']?></td>
                            <td><?=$RemainAmount?></td>
                            <td><?=$Rows['CtnCurrency']?></td>
                        </tr>
                    <?php
                        $Counter++;
                    } 
                }
                ?>
            </tbody>
        </table>
    </div>  
</div>

<script>
function HideLiveSearch()
{
    document.getElementById('livesearch').style.display = 'none';
}
function PutTheValueInTheBox(inner , id) {
    console.log(id) ;   console.log(inner) ;
    document.getElementById('customer').value = inner;
    document.getElementById('livesearch').style.display = 'none';
    document.getElementById('CustId').value = id; 
    document.getElementById('CustId1').value = id;  

}
  
function AJAXSearch(str) {
      document.getElementById('livesearch').style.display = '';
    if (str.length == 0) {
      return false;
    } 
    else 
    {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200)  
          {
                var response = JSON.parse(this.responseText);
                var html = ''; 
                    if(response !=  '-1')
                    {
                      for(var count = 0; count < response.length; count++) 
                      {
                                  html += '<a href="#" onclick = "PutTheValueInTheBox( `' + response[count].CustName + '`   , ' + response[count].CustId + ')"  class="list-group-item list-group-item-action" aria-current="true">' ; 
                                  html += response[count].CustName; 
                                  html += '   </a>';
                      }
                    }

                    else html += '<a href="#" class="list-group-item list-group-item-action " aria-current="true"> No Match Found</a> ';
                    document.getElementById('livesearch').innerHTML = html;  
          }
       }
      xmlhttp.open("GET", "AJAXSearch.php?query=" + str, true);
      xmlhttp.send();
    }
}

function HideLiveSearch()
{
    document.getElementById('livesearch').style.display = 'none';
}
 
function search(Search_input ,JobTable)
      {
          var input, filter, table, tr, td, i, txtValue;
          input = document.getElementById(InputId);
          filter = input.value.toUpperCase();
          table = document.getElementById(tableId);
          tr = table.getElementsByTagName("tr");

          // Loop through all table rows, and hide those who don't match the search query
            for (i = 1; i < tr.length; i++) 
            {
                td = tr[i];
                if (td) 
                {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) 
                    {
                        tr[i].style.display = "";
                    } 
                    else 
                    {
                        tr[i].style.display = "none";
                    }
                }
            }
      }
 

</script>

<?php  require_once '../App/partials/Footer.inc'; ?>